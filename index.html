<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>8-Cell BF Terminal</title>
    <style>
        body { font-family: monospace; background: #121212; color: #00ff41; padding: 20px; max-width: 900px; margin: auto; }
        textarea { width: 100%; height: 180px; background: #1e1e1e; color: #00ff41; border: 1px solid #333; padding: 10px; font-size: 1.1em; resize: vertical; }
        input { width: 100%; padding: 10px; background: #1e1e1e; color: #fff; border: 1px solid #333; margin: 10px 0; box-sizing: border-box; }
        button { background: #00ff41; color: #000; border: none; padding: 12px 25px; font-weight: bold; cursor: pointer; }
        button:hover { background: #00cc33; }
        #output { margin-top: 20px; padding: 15px; background: #000; border: 1px solid #333; min-height: 40px; white-space: pre-wrap; color: #fff; }
    </style>
</head>
<body>

    <h2>8-CELL INTERPRETER</h2>
    
    <label>Program:</label>
    <textarea id="code" placeholder="Enter BF code...">++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.</textarea>
    
    <label>Input Buffer (for , command):</label>
    <input type="text" id="inputBuffer" placeholder="Characters for the ',' command go here...">
    
    <button onclick="runBF()">EXECUTE</button>

    <h3>Output:</h3>
    <div id="output"></div>

    <script>
    function runBF() {
        const code = document.getElementById('code').value;
        const outBox = document.getElementById('output');
        let inputArr = document.getElementById('inputBuffer').value.split('').map(c => c.charCodeAt(0));
        
        outBox.innerText = '';
        
        const MEM_SIZE = 8;
        const memory = new Uint8Array(MEM_SIZE);
        let ptr = 0, pc = 0, output = "";

        // Jump Mapping
        const stack = [], jumps = {};
        for (let i = 0; i < code.length; i++) {
            if (code[i] === '[') stack.push(i);
            else if (code[i] === ']') {
                let start = stack.pop();
                jumps[start] = i;
                jumps[i] = start;
            }
        }

        // Execution
        while (pc < code.length) {
            switch (code[pc]) {
                case '>': ptr = (ptr + 1) % MEM_SIZE; break;
                case '<': ptr = (ptr - 1 + MEM_SIZE) % MEM_SIZE; break;
                case '+': memory[ptr]++; break;
                case '-': memory[ptr]--; break;
                case '.': output += String.fromCharCode(memory[ptr]); break;
                case ',': memory[ptr] = inputArr.length > 0 ? inputArr.shift() : 0; break;
                case '[': if (memory[ptr] === 0) pc = jumps[pc]; break;
                case ']': if (memory[ptr] !== 0) pc = jumps[pc]; break;
            }
            pc++;
        }
        outBox.innerText = output || "Process finished with no output.";
    }
    </script>
</body>
</html>
